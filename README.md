# ngrams

Данный скрипт нужен для того, чтобы быстро и удобно анализировать сочетаемость прилагательного, сравнивать сочетаемости прилагательных и анализировать частотность.
Программа может быть полезным инструментом лексико-типологических исследований.

Результатом работы программы являются:
* таблица частотностей _result_ngrams.csv, в которой показано распределение частотности сочетания прилагательного с различными существительными
* сравнительная таблица _result_comparation.csv, в которой показано сравнение частотностей сочетаемости двух прилагательных
* график корреляции между сочетаемостями двух прилагательных


Код написан на Python3.5 (https://www.python.org/downloads/)

Для построения графиков должен быть скачан R (http://cran.gis-lab.info/)

<b>КАК ПОЛЬЗОВАТЬСЯ КОДОМ?:</b>

1. Сперва нужно скопироварь репозиторий: git clone https://github.com/Shakurova/ngrams.git
2. Установить модули (см. "установка необходимых модулей и программ")
3. Создать папку data. Потом с сайта http://storage.googleapis.com/books/ngrams/books/datasetsv2.html надо скачать нужные файлы с биграммами и положить в эту папку. Файлы устроены следующим образом: в одном файле хранятся n-граммы, у которых совпадают два первых символа (это значит, что в одном файле находятся все n-граммы, начинающиеся на аа, в следующем – на аб). Например, если Вы хотите исследовать сочетаемости прилагательных <i>влажный</i> и <i>мокрый</i>, значит, Вам нужно скачать файлы <i>vl</i> и <i>mo</i> из раздела 2-grams русского языка.
4. Далее нужно распаковать архив с биграммами и положить в папку data (./russian/data/).
5. Запустить программу main.py и следовать инструкциям


<b>УСТАНОВКА НЕОБХОДИМЫХ МОДУЛЕЙ И ПРОГРАММ:</b>

<b>Для Python:</b>

1. Перейти в склонированный репозиторий и установить нужные модули (pip3 install -r requirements.txt)

2. Если Вы хотите работать с русским языком, Вам нужно будет скачать mystem. Для этого нужно перейти по ссылке https://tech.yandex.ru/mystem/, скачать версию 3.0 и положить в папку с проектом (ngrams)

3. Если Вы хотите работать с немецким языком, Вам нужно будет скачать tretagger. Для этого

- создать где-нибудь папку, перейти по ссылке http://www.cis.uni-muenchen.de/~schmid/tools/TreeTagger/ и скачать в эту папку

- пакет анализатора для целевой системы: Linux (x86), Linux (x86_64), Mac OS X (Intel), Mac OS X (PowerPC), Solaris (SPARC);

- скрипты для разметки в директорию с пакетом анализатора (tagging scripts);

- установочный скрипт install-tagger.sh;

- файлы параметров для немецкого языка (German parameter file (UTF-8));

- открыть терминал, перейти в папку, где лежат все файлы, и запустить установочный скрипт install-tagger.sh, который распакует и сконфигурирует пакеты в текущую директорию

Далее, установить модуль pip install treetaggerwrapper

4. Если для немецкого или английского вы хотите сделать перевод, тогда нужно установить модуль pip install yandex.translate, зайти на сайт https://tech.yandex.com/keys/get/?service=trnsl
и получить бесплатный API ключ.

<b>Для R:</b>

1. install.packages("ggplot2")
2. install.packages("plotly")
3. Установить Pandoc http://pandoc.org/installing.html




<b>ОПИСАНИЕ РАБОТЫ ПРОГРАММЫ:</b>

Список программ:
* lines_selector.py
* new_ngrams.py
* comparation.py

<b>Программа LINES_SELECTOR:</b>

Программа lines_selector берет файл, содержащий биграммы из google ngrams, год, количество вхождений, число книг в этот год. Возвращает файл <i>result_lines_selector</i>, содержащий пары прилагательное существительное и их частотность.

Функции:

* lines_selector -- возвращается массив строк, содержащих корень заданного прилагательного и теги _ADJ и _NOUN;

* frequency -- проверяется порядок слов (прилагательное существительное) и создается словарь <i>dictionary</i>, где ключи - существительное прилагательное, а значения - частотность.

* comparation -- выводит частотности существительных по паре прилагательных

<b>Программа NEW_NGRAMS:</b>

Программа new_ngrams берет файл <i>mystem_result</i>, содержащий разборы прилагательных и существительных с помощью Mystem'а. Возвращает файл <i>result_dict_output</i>, содержащий лемматизированные существительные и их частотность.

Функции:

* create_dictionary_gram -- возвращается словарь, содержащий разборы прилагательных и существительных;

* agreement -- проверяет согласованность прилагательного и существительного;

* create_result_dict -- создает словарь, содержащий лемматизированное существительное и частотность.


